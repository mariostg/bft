{% extends 'core/base.html' %}
{% load humanize %}
{% block title %}Capital Historical Outlook{% endblock title %}
{% block content %}
<main class='block block--centered'>
    {% if not table %}
    <div class="alert alert--info">There are no data to display</div>
    {% endif %}

    <h1>Capital Historical Outlook</h1>
    {% if form_filter %}
    {% include "core/capital-forecasting-filter.html" %}
    {% endif %}
{{table|safe}}
<div class="chart">
    <div id="chart_outlook"><div class="chart__title">Historical Outlook</div></div>
</div>
{% autoescape off %}
<script>data={{data}}</script>
<script type="module">
    import { Chart, ChartHandler } from "/static/js/barchart.js";
    const data_estimates = data.map(function (e) {
        return { FY: e.fy, "Initial Allocation": e['Initial Allocation'],  'Q1 MLE': e['Q1 MLE'],'Q2 MLE': e['Q2 MLE'],'Q3 MLE': e['Q3 MLE'],'Q4 MLE': e['Q4 MLE'],'YE Spent':e['YE Spent'] };
    });
    data_estimates.columns = Object.keys(data_estimates[0]);
    var config = {
        style: { type: "bar", barmode: "grouped", orientation: "v", width: 500, height: 200 },
        legend: { visibility: "show", orient: "v" }
    };
    Chart("chart_outlook", data_estimates, config);
    ChartHandler.ajust_chart_width()
</script>
{{chart}}
{% endautoescape %}

</main>


{% endblock content %}